{% extends "FOSUserBundle::layout.html.twig" %}

{% block title %}AppBundle:Default:index{% endblock %}

{% block fos_user_content %}
    <div class="container">
        <div class="row">
            <div class="col-md-12">

                <h1 class="centered title">SysVentory</h1>

                <div id="chart_div"></div>
            </div>
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript" src="https://www.google.com/jsapi?autoload={'modules':[{'name':'visualization','version':'1.1','packages':['corechart', 'timeline']}]}"></script>
    <script>
        google.load('visualization', '1', {packages: ['corechart']});
        google.setOnLoadCallback(drawChart);

        function drawChart() {

            var data = new google.visualization.DataTable();
            data.addColumn('date', 'Time of Day');
            data.addColumn('number', 'Anzahl Computer');

            data.addRows([
                {% for data in compositionHistoryStatistics %}
                    [new Date({{ data.dateday|date("Y") }}, {{ data.dateday|date("m")-1 }}, {{ data.dateday|date("d") }}), {{ data.quantity }}],
                {% endfor %}
            ]);


            var options = {
                title: 'API Statistik',
                width: 600,
                height: 350,
                hAxis: {
                    format: 'd.M.yy',
                    gridlines: {count: 15}
                },
                vAxis: {
                    gridlines: {color: 'none'},
                    minValue: 0,
                    viewWindow:{
                        max:6,
                        min:0
                    }
                }
            };

            var chart = new google.visualization.LineChart(document.getElementById('chart_div'));

            chart.draw(data, options);

        }
    </script>
{% endblock %}
